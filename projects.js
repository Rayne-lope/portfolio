// DATA PROJECT
const projectsData = [
  // --- PROJECT BARU: AERO ---
  {
    id: "aero",
    title: "AERO",
    category: "UI/UX Design",
    tech: ["Figma"],
    shortDesc: "Train Ticket Booking App Design",
    description:
      "AERO adalah konsep desain antarmuka (High-Fidelity Design) untuk aplikasi pemesanan tiket kereta api. Proyek ini berfokus pada penciptaan pengalaman pengguna (UX) yang mulus dan tampilan (UI) yang modern.\n\nFitur desain mencakup alur pemesanan tiket (pilih rute, jadwal, kursi), detail penumpang, hingga metode pembayaran digital (QRIS/E-Wallet). Dirancang menggunakan sistem komponen yang konsisten di Figma untuk kemudahan pengembangan.",
    thumbnail: "projects/Aero/AERO.png", // Path diperbaiki
    images: [
      "projects/Aero/AERO.png",
      "projects/Aero/1.png",
      "projects/Aero/2.png",
      "projects/Aero/3.png",
      "projects/Aero/4.png",
      "projects/Aero/5.png",
      "projects/Aero/6.png",
      "projects/Aero/7.png",
      "projects/Aero/8.png",
      "projects/Aero/9.png",
      "projects/Aero/10.png",
      "projects/Aero/11.png",
      "projects/Aero/12.png",
    ],
    link: "",
    figma:
      "https://www.figma.com/design/WyieoHPQBtOYxcjuxNFq4g/Untitled?node-id=421-2516&t=etdxwNQcnmHImuI0-1",
  },
  {
    id: "planify",
    title: "Planify",
    category: "Mobile App",
    tech: ["Flutter", "Dart", "SQLite", "Figma"],
    shortDesc: "Student Academic Planner App",
    description:
      "Planify adalah aplikasi mobile komprehensif yang dirancang untuk membantu mahasiswa mengatur kehidupan akademik mereka. Fitur utamanya mencakup sistem penjadwalan, pelacakan tugas dengan pengingat tenggat waktu, dan kalkulator IPK.\n\nDibangun dengan Flutter untuk performa mulus di iOS dan Android. Aplikasi ini berfokus pada kesederhanaan dan kemudahan penggunaan, memungkinkan siswa untuk memasukkan data kursus mereka dengan cepat. Juga mencakup mode gelap untuk sesi belajar larut malam.",
    thumbnail: "projects/planify/1.jpeg", // Path diperbaiki
    images: [
      "projects/planify/1.jpeg",
      "projects/planify/2.jpeg",
      "projects/planify/3.jpeg",
      "projects/planify/4.jpeg",
      "projects/planify/5.jpeg",
      "projects/planify/6.jpeg",
      "projects/planify/7.jpeg",
    ],
    link: "#",
  },
  {
    id: "tripsaver",
    title: "TripSaver",
    category: "Mobile App",
    tech: ["Flutter", "Dart", "Hive", "GPS", "REST API"],
    shortDesc: "Travel Expense Tracker",
    description:
      "TripSaver adalah aplikasi pencatat pengeluaran perjalanan yang membantu pengguna mengatur biaya selama bepergian. Aplikasi ini mendukung multi-mata uang, konversi otomatis ke Rupiah, lokasi otomatis berbasis GPS, serta riwayat dan detail transaksi yang lengkap.\n\nDengan sistem penyimpanan lokal terenkripsi, data tetap aman meskipun tanpa koneksi internet. TripSaver juga dilengkapi notifikasi harian dan fitur ekspor-impor untuk backup data.",
    thumbnail: "projects/tripsaver/1.jpeg", // Path diperbaiki
    images: [
      "projects/tripsaver/1.jpeg",
      "projects/tripsaver/2.jpeg",
      "projects/tripsaver/3.jpeg",
      "projects/tripsaver/4.jpeg",
      "projects/tripsaver/5.jpeg",
      "projects/tripsaver/6.jpeg",
      "projects/tripsaver/7.jpeg",
      "projects/tripsaver/8.jpeg",
      "projects/tripsaver/9.jpeg",
      "projects/tripsaver/10.jpeg",
      "projects/tripsaver/11.jpeg",
    ],
    link: "#",
  },
  {
    id: "pengaduan-upn",
    title: "Pengaduan UPN",
    category: "Web App",
    tech: ["PHP Native", "MySQL", "Tailwind"],
    shortDesc: "Sistem Layanan Aspirasi & Pengaduan",
    description:
      "Platform berbasis web yang dirancang khusus untuk menampung aspirasi dan pengaduan mahasiswa UPN Veteran Yogyakarta. Sistem ini bertujuan untuk meningkatkan transparansi dan kualitas pelayanan kampus.\n\nFitur utama meliputi pelacakan status laporan secara real-time (Menunggu, Diterima, Diproses, Selesai), upload bukti foto, serta dashboard admin yang komprehensif untuk mengelola dan menindaklanjuti setiap laporan yang masuk.",
    thumbnail: "projects/pengaduan/1.jpeg", // Path diperbaiki
    images: [
      "projects/pengaduan/1.jpeg",
      "projects/pengaduan/2.jpeg",
      "projects/pengaduan/3.jpeg",
      "projects/pengaduan/4.jpeg",
      "projects/pengaduan/5.jpeg",
      "projects/pengaduan/6.jpeg",
      "projects/pengaduan/7.jpeg",
      "projects/pengaduan/8.jpeg",
      "projects/pengaduan/9.jpeg",
      "projects/pengaduan/10.jpeg",
      "projects/pengaduan/11.jpeg",
      "projects/pengaduan/12.jpeg",
      "projects/pengaduan/13.jpeg",
      "projects/pengaduan/14.jpeg",
      "projects/pengaduan/15.jpeg",
      "projects/pengaduan/16.jpeg",
      "projects/pengaduan/17.jpeg",
    ],
    link: "#",
  },
  {
    id: "dapoer-djawa",
    title: "Dapoer Djawa",
    category: "Web & UI Design",
    tech: ["HTML/CSS", "JavaScript", "PHP Native", "Figma"],
    shortDesc: "Restaurant Landing Page",
    description:
      "Project ini adalah pengembangan website profil sekaligus sistem pemesanan untuk restoran Dapoer Djawa. Mulai dari perancangan UI/UX hingga implementasi menggunakan HTML dan CSS, website ini menyediakan informasi restoran, daftar menu, serta fitur pemesanan yang dirancang sederhana dan mudah digunakan.\n\nDesain dibuat untuk mendukung identitas restoran dengan tampilan yang konsisten, modern, dan responsif agar nyaman diakses melalui berbagai perangkat.",
    thumbnail: "projects/djawa/1.jpeg", // Path diperbaiki
    images: [
      "projects/djawa/1.jpeg",
      "projects/djawa/2.jpeg",
      "projects/djawa/3.jpeg",
      "projects/djawa/4.jpeg",
      "projects/djawa/5.jpeg",
      "projects/djawa/6.jpeg",
      "projects/djawa/7.jpeg",
      "projects/djawa/8.jpeg",
      "projects/djawa/9.jpeg",
      "projects/djawa/10.jpeg",
      "projects/djawa/11.jpeg",
      "projects/djawa/12.jpeg",
      "projects/djawa/13.jpeg",
      "projects/djawa/14.jpeg",
      "projects/djawa/15.jpeg",
      "projects/djawa/16.jpeg",
      "projects/djawa/17.jpeg",
      "projects/djawa/figma.jpeg",
    ],
    link: "#",
    figma:
      "https://www.figma.com/design/M0ZHq99ukwFp01nVtEEodP/PROJECT-RBPL?node-id=0-1&t=UpRotgVmeZ8j6mf7-1",
  },
  {
    id: "luxe-parfum",
    title: "Luxe Parfum",
    category: "E-Commerce",
    tech: ["HTML", "CSS", "JavaScript", "PHP Native"],
    shortDesc: "Online Fragrance Store",
    description:
      "Luxe Parfum (Brilliant) adalah platform e-commerce sederhana yang dikembangkan untuk penjualan produk parfum secara online. Website ini dirancang untuk memberikan pengalaman belanja yang ringkas dan efisien.\n\nFitur utama meliputi katalog produk dengan tampilan grid, halaman detail produk untuk melihat spesifikasi harga, serta halaman checkout yang terintegrasi untuk pengisian data pengiriman. Dibangun sepenuhnya menggunakan teknologi web dasar untuk mendalami logika pemrograman server-side dan manipulasi DOM tanpa bantuan framework.",
    thumbnail: "projects/parfum/1.jpeg", // Path diperbaiki
    images: [
      "projects/parfum/1.jpeg",
      "projects/parfum/2.jpeg",
      "projects/parfum/3.jpeg",
      "projects/parfum/4.jpeg",
      "projects/parfum/5.jpeg",
    ],
    link: "#",
  },
  {
    id: "gametopup",
    title: "Zephyr Top up Store",
    category: "Web App",
    tech: ["HTML", "CSS", "JavaScript", "PHP Native"],
    shortDesc: "Game Credits Top-up Interface",
    description:
      "Zephyr Top Up Store adalah platform layanan top-up game online yang dirancang dengan antarmuka modern dan user-centric. Website ini menawarkan solusi 'Simple, Easy Pricing' bagi para gamer untuk membeli kredit game (seperti Diamond Mobile Legends) dengan cepat dan transparan.\n\nDesain UI mengusung tema gelap yang elegan dengan navigasi yang intuitif, memudahkan pengguna untuk memilih paket (Weekly Diamond Pass, Starlight Card, Twilight Pass) dan menyelesaikan transaksi tanpa hambatan. Dibangun dengan teknologi web dasar untuk memastikan performa yang ringan dan kompatibilitas yang luas.",
    thumbnail: "projects/topup/1.jpeg", // Path diperbaiki
    images: [
      "projects/topup/1.jpeg",
      "projects/topup/2.jpeg",
      "projects/topup/3.jpeg",
      "projects/topup/4.jpeg",
      "projects/topup/5.jpeg",
      "projects/topup/6.jpeg",
      "projects/topup/7.jpeg",
      "projects/topup/8.jpeg",
    ],
    link: "#",
  },
];

// LOGIC RENDER & INTERAKSI
document.addEventListener("DOMContentLoaded", () => {
  const projectsGrid = document.getElementById("projects-grid");

  // 1. Render Projects to Grid (projects.html)
  if (projectsGrid) {
    projectsData.forEach((project) => {
      const card = document.createElement("a");
      card.href = `project-detail.html?id=${project.id}`;
      card.className =
        "bg-[#212121] rounded-2xl overflow-hidden border border-white/5 group hover:border-accent/50 transition-all duration-300 cursor-pointer flex flex-col h-full block";
      card.innerHTML = `
                <div class="aspect-video bg-[#111] relative overflow-hidden">
                    <img src="${project.thumbnail}" alt="${
        project.title
      }" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700">
                    <div class="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center gap-2">
                        <span class="bg-[#1A1A1A] text-white p-3 rounded-full hover:scale-110 transition-transform border border-white/10">
                            <i data-lucide="arrow-right" width="20"></i>
                        </span>
                    </div>
                </div>
                <div class="p-5 flex flex-col flex-grow">
                    <h3 class="text-xl font-bold text-white mb-1 font-heading">${
                      project.title
                    }</h3>
                    <p class="text-sm text-textMuted mb-4">${
                      project.shortDesc
                    }</p>
                    <div class="flex flex-wrap gap-2 mt-auto">
                        ${project.tech
                          .slice(0, 3)
                          .map(
                            (t) =>
                              `<span class="px-2 py-1 bg-[#2A2A2A] rounded text-[10px] text-gray-300 font-medium border border-white/5">${t}</span>`
                          )
                          .join("")}
                        ${
                          project.tech.length > 3
                            ? `<span class="px-2 py-1 bg-[#2A2A2A] rounded text-[10px] text-gray-300 font-medium border border-white/5">+${
                                project.tech.length - 3
                              }</span>`
                            : ""
                        }
                    </div>
                </div>
            `;
      projectsGrid.appendChild(card);
    });
  }

  // 2. Render Detail Page (project-detail.html)
  const detailTitle = document.getElementById("detail-title");

  if (detailTitle) {
    const params = new URLSearchParams(window.location.search);
    const projectId = params.get("id");
    const project = projectsData.find((p) => p.id === projectId);

    if (project) {
      document.title = `${project.title} - Project Detail`;
      document.getElementById("detail-category").textContent = project.category;
      document.getElementById("detail-title").textContent = project.title;
      document.getElementById("detail-desc").innerHTML =
        project.description.replace(/\n/g, "<br>");

      const techContainer = document.getElementById("detail-tech");
      if (techContainer) {
        techContainer.innerHTML = "";
        project.tech.forEach((t) => {
          techContainer.innerHTML += `<span class="px-3 py-1 bg-[#252525] rounded-full text-xs text-white border border-accent/20">${t}</span>`;
        });
      }

      const techListContainer = document.getElementById("detail-tech-list");
      if (techListContainer) {
        techListContainer.innerHTML = "";
        project.tech.forEach((t) => {
          techListContainer.innerHTML += `<div class="flex items-center gap-2"><div class="w-1.5 h-1.5 rounded-full bg-accent"></div><span class="text-gray-300">${t}</span></div>`;
        });
      }

      const linksContainer = document.getElementById("detail-links");
      if (linksContainer) {
        linksContainer.innerHTML = "";

        if (project.link && project.link !== "#" && project.link !== "") {
          const githubLink = document.createElement("a");
          githubLink.href = project.link;
          githubLink.target = "_blank";
          githubLink.className =
            "w-full bg-white text-black py-3 rounded-xl flex items-center justify-center gap-2 font-bold hover:bg-gray-200 transition-colors";
          githubLink.innerHTML = `<i data-lucide="github" width="20"></i> View Source`;
          linksContainer.appendChild(githubLink);
        }

        if (project.figma) {
          const figmaLink = document.createElement("a");
          figmaLink.href = project.figma;
          figmaLink.target = "_blank";
          figmaLink.className =
            "w-full bg-[#252525] text-white py-3 rounded-xl flex items-center justify-center gap-2 font-bold hover:bg-[#333] border border-white/10 transition-colors";
          if (!project.link || project.link === "" || project.link === "#") {
            figmaLink.className =
              "w-full bg-white text-black py-3 rounded-xl flex items-center justify-center gap-2 font-bold hover:bg-gray-200 transition-colors";
          }
          figmaLink.innerHTML = `<i data-lucide="figma" width="20"></i> View Figma Design`;
          linksContainer.appendChild(figmaLink);
        }
      }

      const slider = document.getElementById("detail-slider");
      const prevBtn = document.getElementById("prev-slide");
      const nextBtn = document.getElementById("next-slide");

      if (slider && project.images && project.images.length > 0) {
        slider.innerHTML = "";
        project.images.forEach((img) => {
          slider.innerHTML += `
                        <div class="w-full flex-shrink-0 snap-center flex items-center justify-center bg-[#050505] p-4">
                            <img src="${img}" class="h-full max-w-full object-contain shadow-lg rounded-lg">
                        </div>
                    `;
        });

        if (prevBtn && nextBtn) {
          prevBtn.addEventListener("click", () => {
            slider.scrollBy({ left: -slider.clientWidth, behavior: "smooth" });
          });
          nextBtn.addEventListener("click", () => {
            slider.scrollBy({ left: slider.clientWidth, behavior: "smooth" });
          });
        }
      } else if (slider) {
        slider.innerHTML =
          '<div class="w-full flex-shrink-0 flex items-center justify-center text-gray-500">No images available</div>';
        if (prevBtn) prevBtn.style.display = "none";
        if (nextBtn) nextBtn.style.display = "none";
      }
    } else {
      const main = document.querySelector("main");
      if (main) {
        main.innerHTML = `<div class="text-center py-20"><h1 class="text-4xl font-bold text-white">Project Not Found</h1><a href="projects.html" class="text-accent hover:underline mt-4 block">Back to Projects</a></div>`;
      }
    }
  }

  if (window.lucide) {
    window.lucide.createIcons();
  }
});
